# 11.15 41강~48강

1. 액티비티와 수명주기 ==> MyLifeCycle

   1) 액티비티의 상태

   - 실행(running) : 화면 상에 액티비티가 보이면서 실행되어 있는 상태, 액티비티 스택의 최상위에 있으며 포커스를 가지고 있음.
   - 일시중지(paused) : 사용자에게 보이기는 하지만 다른 액티비티가 위에 있어 포커스를 받지 못하는 상태. 대화상자가 위에 있어 일부가 가려져 있는 경우에 해당함
   - 중지(stopped) : 다른 액티비티에 의해 완전히 가려져 보이지 않는 상태

   2) <화면시작할때 순서>

   - onCreate() : 액티비티가 메모리로 만들어지고, 동작하기 전 준비할 때 켜짐.
   - onStart() : 
   - onResume(); 화면이 보여지기 직전 보여짐. 복구되는 시점에 처음시작되는 메소드이기 때문에 중요

      <화면 끝낼때 순서>

   - onPause(); 중지되는 시점에 처음시작되는 메소드이기 때문에 중요, 필요한 데이터를 저장

     ​                   getsharedPreferences()라는 메소드를 통해 설정정보를 간단하게 저장 

   - onStop();

   - onDestroy();

   3) 메인에서 => 메뉴화면띄울때

   - 메인화면 : onPause(); onStop(); 되고 다시 실행될 때, onResume();

2. 서비스 ==> MyService

   1) 화면이 없더라도 기능을 하는 것, 화면이 없는 상태에서 백그라운드로 실행됨

   2) 서비스는 프로세스가 종료되어도 시스템에서 자동으로 재시작함

   3) 시스템이 관리하며 서비스가 비정상적으로 종료되더라도 자동으로 시작.

   4) 애플리케이션 구성요소이기 때문에, 서비스를 만들때마다 메니페스트에 등록해야 된다.

   5) AVD에서 서비스가 계속 꺼지지 않음을 알 수 있다. tools / android 

   6) 액티비티에서 서비스를 실행하거나 데이터를 전달할 때, 시스템을 항상 통과한다. 둘 다 시스템에서 관리하는 애플리케이션 구성요소이기 때문이다. 

   7) 서비스(카카오톡, 채팅앱)은 화면에 없더라도 메시지를 주고 받는 상황이 있다.  이때는 반대로 서비스를 액티비로 띄어야하는상황이 있다. 

   - task : 화면을 저장해 놓은 곳, 즉, 전화는 전화걸기 화면,, 이렇게 지정되어있는데, 서비스와 같이 화면이 없는 곳에서 화면을 띄우라고 하면 task에 저장되지 않았기 때문에, 문제를 일으킴(책참조) => showIntent.addFlags(); 이 옵션을 줘야 가능.

   8) intent 로 데이터로 전달할 떄, 이미 서비스가 실행되는 경우,  이미 액티비티가 떠있는 것도 감안

3. 브로드 캐스트 수신자 ==> MySnsReceiver

   1)  브로드캐스팅된 메시지를 받는 것 

   2) sms  

- 필요한 앱들은 문자를 받아서 처리하세요. 
- 인텐트에다 메시지를 넣어서 브로드 캐스트를 하세요
- 여러사람에게 한꺼번에 뿌려주는 걸 브로드캐스팅
- 브로드 캐스팅 방식으로 인텐트가 뿌려지는데 내가 뿌려지는 인텐트라는 객체를 받겠다
- 그럴때 브로드캐스트 수신자로 등록
- 인텐트를 해석하는 과정(책참조)
- 메세지가 왔습니다라고 띄우고 싶다? 브로드캐스트(화면없다) => 새로 액티비티를 만들어서 그 액티비티를 띄어줄수 있따. 인텐트객체를 만들어서 인텐트객체를 던져서 그 화면에 뿌려준다.  

4. 위험권한 부여하기 ==>  MySnsReceiver 

   1)  허용에 대한 메세지를 설치이후에도 띄어줘야한다.

   2) 대표적인 위험 권한들(책참고)


4. 리소스와 메니페스트